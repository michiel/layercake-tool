@startuml

hide stereotype
{{#if graph_name}}
title {{graph_name}}
{{/if}}

{{#if (stringeq config.orientation "LR") }}
left to right direction
{{else}}
top to bottom direction
{{/if}}

{{#if (stringeq config.built_in_styles "dark")}}
skinparam backgroundColor #1e1e1e
skinparam defaultFontColor #f5f5f5
skinparam ArrowColor #dfe3ec
skinparam RectangleBorderColor #777777
{{else if (stringeq config.built_in_styles "none")}}
skinparam shadowing false
{{else}}
skinparam backgroundColor #ffffff
skinparam defaultFontColor #1f2933
skinparam ArrowColor #2B303A
skinparam RectangleBorderColor #555555
{{/if}}
skinparam defaultFontName Lato
skinparam shadowing false

{{#if config.apply_layers}}
<style>
{{#each layers as |layer|}}
    .{{layer.id}} {
        BackgroundColor #{{layer.background_color}};
        BorderColor #{{layer.border_color}};
        FontColor #{{layer.text_color}};
    }
{{/each}}
</style>
{{/if}}

{{#if config.contain_nodes}}
    {{#each hierarchy_tree as |rootnode|}}
{{{puml_render_tree rootnode ../layers ../config}}}
    {{/each}}
{{else}}
    {{#each flow_nodes as |node|}}
  rectangle "{{node.label}}" as {{node.id}}{{#if config.apply_layers}} <<{{node.layer}}>>{{/if}}
    {{/each}}
{{/if}}

{{#each flow_edges as |edge|}}
    {{#if (exists edge.label)}}
 {{edge.source}} --> {{edge.target}} : "{{edge.label}}"
    {{else}}
 {{edge.source}} --> {{edge.target}}
    {{/if}}
{{/each}}

@enduml
